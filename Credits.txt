Huge thanks to kiroma (kiroma#9872) for writing CMakeLists and massively helping with debugging. 
